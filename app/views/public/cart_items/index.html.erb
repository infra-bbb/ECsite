<h2>カート内商品一覧</h2>
<% if flash[:error] %>
<div class="existing">
  <b><%= flash[:error] %></b>
</div>
<% end %>
<%= link_to "商品を追加する", public_items_path %>
<table>
  <thead>
    <tr>
      <th>商品名</th>
      <th>数量</th>
      <th colspan="2"></th>
    </tr>
  </thead>
  <% @cart_items.each do |cart_item| %>
    <tbody>
      <tr>
        <td><%= cart_item[0] %></td>
        <td><%= cart_item[1].amount %> 個</td>
        <td>
          <%= form_for(cart_item[1], url: public_cart_item_path(cart_item[1])) do |f| %>
            <%= f.number_field :amount, min:1, :class => 'number_field' %>
            <%= f.submit '変更' %>
          <% end %>
        </td>
        <td><%= link_to "削除", public_cart_item_path(cart_item[1]), method: :delete %></td>
      </tr>
    </tbody>
  <% end %>
</table>
<% if @cart_items.empty? == false %>
  <%= link_to "すべて削除", public_cart_items_path, method: :delete %>
  <%= link_to "注文画面へ", new_public_order_path %>
<% end %>